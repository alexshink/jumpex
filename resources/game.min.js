function getId(a){return document.getElementById(a)}function addClass(a,b){getId(a).classList.add(b)}function removeClass(a,b){getId(a).classList.remove(b)}for(var renderLoopTimeout,html=document.documentElement,page=getId("page"),road=getId("road"),obstacles=getId("obstacles"),roadSpeed=parseFloat(getComputedStyle(road).animationDuration),pixelsPerMs=roadSpeed/388,obstaclesItems={bomb:{img:"resources/img/bomb.png",cls:"obstacle_bomb"},fire:{img:"resources/img/fire.gif",cls:"obstacle_fire"},plasm:{img:"resources/img/plasm.gif",cls:"obstacle_plasm"}},btnJump=getId("btnJump"),menu=getId("menu"),menuButtons=document.getElementsByClassName("menu__button"),i=0;i<menuButtons.length;i++)menuButtons[i].addEventListener("click",function(){if(-1==page.className.indexOf("page_rungame")&&-1==menu.className.indexOf("menu_disable"))switch(this.id){case"menu-start":runGame();break;case"menu-fullscreen":this.classList.toggle("menu__button_fullscreen"),-1==this.className.indexOf("fullscreen")?closeFullscreen():openFullscreen();}},!1);function runGame(){function a(){-1==d.className.indexOf("hero_jump")&&(addClass("hero","hero_jump"),setTimeout(function(){try{removeClass("hero","hero_jump")}catch{}},700))}function b(a){a||(a=1);f.innerHTML=parseInt(f.innerHTML)+a,localStorage.coins=parseInt(localStorage.coins)+a,g.innerHTML=localStorage.coins}function c(){if(-1!=page.className.indexOf("page_rungame")){var a,b,c=document.createElement("div"),d=document.createElement("img"),e=obstaclesItems[Object.keys(obstaclesItems)[Object.keys(obstaclesItems).length*Math.random()<<0]];d.src=e.img,c.className="obstacle "+e.cls,c.appendChild(d),obstacles.appendChild(c),a=obstacles.lastChild,b=(a.getBoundingClientRect().left+100)*pixelsPerMs,a.style.transition="transform linear "+b+"s",a.style.transform="translateX(-"+(a.getBoundingClientRect().left+100)+"px)"}}addClass("page","page_rungame"),addClass("menu","menu_disable"),obstacles.innerHTML="";var d,e=document.createElement("div");e.id="hero",e.className="hero",e.innerHTML="<img src=\"resources/img/jumpex.gif\">",page.appendChild(e),d=getId("hero");document.onkeydown=function(b){38==b.keyCode&&a()},document.addEventListener("touchstart",function(b){-1!=b.target.className.indexOf("jump")&&a()},!1);var f,g,h=document.createElement("div");h.id="coins",h.className="coins",h.innerHTML="<div class=\"coins__inner\"><p id=\"coins__current\" class=\"coins__current\">0</p><p class=\"coins__bank\">Bank: <span id=\"coins__all\" class=\"coins__all\">"+localStorage.coins+"</span></p></div>",page.appendChild(h),f=getId("coins__current"),g=getId("coins__all");localStorage.coins||(localStorage.coins=0);var i;setTimeout(function(){i=setInterval(function(){b()},100)},1400);(function a(){var b=Math.floor(1500*Math.random())+700;-1!=page.className.indexOf("page_rungame")&&(renderLoopTimeout=setTimeout(function(){c(),a()},b))})();var j=setInterval(function(){try{var a=d.getBoundingClientRect().left,b=a+d.getBoundingClientRect().width,c=parseFloat(getComputedStyle(d).bottom),e=document.getElementsByClassName("obstacle")[0],f=e.getBoundingClientRect().left,g=f+e.getBoundingClientRect().width,h=parseFloat(getComputedStyle(e).bottom)+e.getBoundingClientRect().height;f<=b&&g>a&&h>c&&(e.classList.add("obstacle_active"),window.stopGame(),-1!=e.className.indexOf("obstacle_bomb")&&(e.firstElementChild.remove(),e.appendChild(document.createElement("img")),e.firstElementChild.src="resources/img/explosive.gif",setTimeout(function(){e.remove()},2500)));-100>=e.getBoundingClientRect().left&&e.remove()}catch{}},10);window.stopGame=function(){clearInterval(i),clearInterval(j),menu.scrollTop=0,removeClass("page","page_rungame"),setTimeout(function(){removeClass("menu","menu_disable")},700),h.remove(),d.remove();var a=document.getElementsByClassName("obstacle")[0];a.style.left=a.getBoundingClientRect().left+"px",a.style.transition="none",a.style.transform="none"}}if(window.addEventListener("resize",function(){-1!=page.className.indexOf("page_rungame")&&window.stopGame()},!1),window.matchMedia("(display-mode: standalone)").matches)getId("menu-fullscreen").remove();else{}
