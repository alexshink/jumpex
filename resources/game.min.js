function getId(a){return document.getElementById(a)}function addClass(a,b){getId(a).classList.add(b)}function removeClass(a,b){getId(a).classList.remove(b)}for(var renderLoopTimeout,html=document.documentElement,page=getId("page"),road=getId("road"),obstacles=getId("obstacles"),roadSpeed=parseFloat(getComputedStyle(road).animationDuration),pixelsPerMs=roadSpeed/388,obstaclesItems={bomb:{img:"resources/img/bomb.webp",cls:"obstacle_bomb"},fire:{img:"resources/img/fire.gif",cls:"obstacle_fire"},plasm:{img:"resources/img/plasm.gif",cls:"obstacle_plasm"}},btnJump=getId("btnJump"),menuButtons=document.getElementsByClassName("menu__button"),i=0;i<menuButtons.length;i++)menuButtons[i].addEventListener("click",function(){switch(this.id){case"menu-start":runGame();break;case"menu-fullscreen":this.classList.toggle("menu__button_fullscreen"),-1==this.className.indexOf("fullscreen")?closeFullscreen():openFullscreen();}},!1);function runGame(){function a(){-1==e.className.indexOf("hero_jump")&&(addClass("hero","hero_jump"),setTimeout(function(){try{removeClass("hero","hero_jump")}catch{}},700))}function b(a){a||(a=1);g.innerHTML=parseInt(g.innerHTML)+a,localStorage.coins=parseInt(localStorage.coins)+a,h.innerHTML=localStorage.coins}function c(){var a,b,c=document.createElement("div"),d=document.createElement("img"),e=obstaclesItems[Object.keys(obstaclesItems)[Object.keys(obstaclesItems).length*Math.random()<<0]];d.src=e.img,c.className="obstacle "+e.cls,c.appendChild(d),obstacles.appendChild(c),a=obstacles.lastChild,b=(a.getBoundingClientRect().left+a.getBoundingClientRect().width)*pixelsPerMs,a.style["animation-duration"]=b+"s"}function d(){clearInterval(j),i.remove(),clearInterval(k),removeClass("page","page_rungame"),e.remove()}addClass("page","page_rungame"),obstacles.innerHTML="",clearTimeout(renderLoopTimeout);var e,f=document.createElement("div");f.id="hero",f.className="hero",f.innerHTML="<img src=\"resources/img/jumpex.gif\">",page.appendChild(f),e=getId("hero");document.onkeydown=function(b){38==b.keyCode&&a()},document.addEventListener("touchstart",function(b){-1!=b.target.className.indexOf("jump")&&a()},!1);var g,h,i=document.createElement("div");i.id="coins",i.className="coins",i.innerHTML="<div class=\"coins__inner\"><p id=\"coins__current\" class=\"coins__current\">0</p><p class=\"coins__bank\">Bank: <span id=\"coins__all\" class=\"coins__all\">"+localStorage.coins+"</span></p></div>",page.appendChild(i),g=getId("coins__current"),h=getId("coins__all");localStorage.coins||(localStorage.coins=0);var j;setTimeout(function(){j=setInterval(function(){b()},100)},1400);(function a(){var b=Math.floor(1500*Math.random())+700;-1!=page.className.indexOf("page_rungame")&&(renderLoopTimeout=setTimeout(function(){c(),a()},b))})(),document.addEventListener("animationend",function(a){-1!=a.target.className.indexOf("obstacle")&&a.target.remove()},!1);var k=setInterval(function(){try{var a=e.getBoundingClientRect().left+e.getBoundingClientRect().width,b=parseFloat(getComputedStyle(e).bottom),c=document.getElementsByClassName("obstacle")[0],f=c.getBoundingClientRect().left,g=parseFloat(getComputedStyle(c).bottom)+c.getBoundingClientRect().height;f<=a&&g>b&&(d(),-1!=c.className.indexOf("obstacle_bomb")&&(c.firstElementChild.remove(),c.appendChild(document.createElement("img")),c.firstElementChild.src="resources/img/explosive.gif",setTimeout(function(){c.remove()},2500)),c.classList.add("obstacle_active"))}catch{}},10)}function openFullscreen(){html.requestFullscreen?html.requestFullscreen():html.mozRequestFullScreen?html.mozRequestFullScreen():html.webkitRequestFullscreen?html.webkitRequestFullscreen():html.msRequestFullscreen&&html.msRequestFullscreen()}function closeFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}
